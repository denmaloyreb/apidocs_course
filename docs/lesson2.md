# Урок 1. Описание методов API в формате Open API

На этом уроке рассмотрим, как описываются методы API в формате Open API. Т.е. после занятия у нас уже будет документация, которую можно показывать разработчикам.

## Про OpenAPI

Для описания API будем использовать спецификацию `OpenAPI v3.0.0`. Почему не более `v3.1.0` свежую от 2021 года? `v3.0.0` хоть и была опубликована в 2017 году, ее и сейчас «по инерции» используют многие. К тому же и некоторые привычные всем инструменты (например, `Swagger Editor`) «ругаются» на v3.1.0.
В одном из следующих уроков обязательно рассмотрим разницу между этими версиями спецификации.

Описывать API  можно в формате `YAM`L или `JSON`: как вам удобно. В курсе будем использовать `YAML`.

Итак, писать спецификацию на API в формате `OpenAPI v3.0.0` можно с помощью разных инструментов. Выбирайте удобный:

- [https://editor.swagger.io/](https://editor.swagger.io/) — онлайн-редактор из состава экосистемы инструментов «Swagger».
- [https://app.swaggerhub.com/](https://app.swaggerhub.com/) — тоже онлайн-редактор. Нужна регистрация. На бесплатном аккаунте можно создавать и публиковать до трех описаний API.
- Плагин `OpenAPI (Swagger) Editor` для `VS Code` — редактор со Swagger UI прямо в IDE.

Давайте рассмотрим создание описания API в формате OpenAPI на примере метода для получения информации об одном техническом писателе.

Ресурс `«Технический писатель»` мы [спроектировали](lesson1#Проектирование-ресурса-«Технический-писатель») на первом уроке. Теперь давайте опишем в формате `OpenAPI` его и метод для получения одного техписа (одного ресурса).

Спецификация в формате `OpenAPI` — это один большой объект (он же — схема), который состоит из полей и объектов поменьше (они, в свою очередь тоже состоят из объектов).
Состав «корневого» объекта описан в спецификации (https://spec.openapis.org/oas/v3.0.0#fixed-fields). Видно, что часть объектов здесь обязательная, а часть — нет.

Мы в курсе будем использовать следующие из них:
- оpenapi — обязательное поле. Здесь указывается, версия  спецификации OpenAPI, в которой описывается API.
- info — обязательный объект. Здесь указывается информация непосредственно о нашем API (описание, версия и т.д.)
- tags — необязательный. Используется для группировки  методов API. Это нужно, например, для того, чтобы разработчики и пользователи API могли лучше ориентироваться в документации.
- paths — обязательный объект. Здесь описываются конечные точки (методы) API.
- components — необязательный объект. Здесь описываются повторно используемые компоненты, которые могут быть использованы в различных частях документации.

Теперь рассмотрим это на конкретном примере.
По ссылке  размещен фрагмент спецификации на наш API, в которой описан метод для получения информации об одном техническом писателе. 
Вы можете скопировать ее в любой из указанных выше инструментов и посмотреть, как это все работает.
Кратко поясняю, что здесь происходит:
- Строка 1. В объекте оpenapi указано, что документация на API подготовлена в формате OpenAPI v3.0.0.
- Строки со 2 по 12. В объекте info указана основная информация про API: краткой и развернутое описание и версия. Здесь можно использовать, например, html-теги, чтобы в Swagger UI или на статическом сайте это выглядело красиво и удобочитаемо.
- Строки с 13 по 15. В объекте tags указан (это) пока, один тег для группировки методов в документации.
- Строка 16. Отсюда начинается описание методов (конечных точек).
- Строки с 17 по 43. Здесь описан метод для получения информации об одном техническом писателе /techwriters/{techwriterId}. 
- Строка 44. Отсюда начинается объект components. 
- Строки с 46 по 94 — здесь описан ресурс (объект) Techwriter, который возвращается в ответе метода для получения информации об одном техническом писателе /techwriters/{techwriterId} (на этот ресурс есть ссылка из описания метода в строке 39).
- На закомментированные строки с 95 по 98 внимания не обращайте. Этот объект автоматически сгенерирован сервисом https://app.swaggerhub.com/.

Посмотреть, что получилось, можно здесь.

Теперь у нас уже есть какая-то документация (один из видов документации) на API для работы с базой технических писателей. И ее можно показывать разработчикам.

Что дальше?  В следующих уроках опишем остальные методы, рассмотрим разницу между описаниями API в формате OpenAPI v3.0.0 и OpenAPI v3.1.0, а затем будем генерировать и кастомизировать статический сайт-справочник (еще один вид документации на API).

Описание этапа получилось краткое. Если у вас есть вопросы, готов ответить. Пишите в комментариях к посту или в личку.